#!/bin/bash

# Load custom system files if they exist
for file in ${HOME}/.system/.{exports,path,aliases,functions,extras}; do
    [ -r "$file" ] && [ -f "$file" ] && source "$file";
done;
unset file;

# Check for macOS (Darwin)
if [[ "$OSTYPE" == "darwin"* ]]; then
    # Brew (Homebrew) setup for macOS
    if command -v brew &>/dev/null; then
        eval "$(/opt/homebrew/bin/brew shellenv)"
    fi

    # Linuxify setup for macOS
    if [[ -f "$HOME/.linuxify" ]]; then
        . "$HOME/.linuxify"
    fi
else
    # Assuming Linux system
    if [[ -f "$HOME/.linuxify" ]]; then
        . "$HOME/.linuxify"
    fi
fi

# Cargo (optional, commented out)
# . "$HOME/.cargo/env"

# fasd
if command -v fasd &>/dev/null; then
    eval "$(fasd --init auto)"
fi

# nnn
export NNN_OPTS="C"
export NNN_USE_PREVIEW="timg"

# Pyenv
if command -v pyenv &>/dev/null; then
    eval "$(pyenv init --path)"
    eval "$(pyenv init -)"
    eval "$(pyenv virtualenv-init -)"
fi

# sdkman (must be at the end)
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"
